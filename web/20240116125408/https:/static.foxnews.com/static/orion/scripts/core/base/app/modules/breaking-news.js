var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

/*! updated; 11-22-2024 02:36 PM **/
Modulr.define("core.base:modules/breaking-news",["require","jquery","lodash","ISA","helper","utils/localStorage","utils/sessionStorage","utils/search.query","utils/script.loader","core.components:newsletter","core.templates:controls/api"],function(require,$,_,ISA,Helper){const isWebview=!!Helper.isWebview();var Helper=require("utils/localStorage"),SessionStorage=require("utils/sessionStorage"),Query=require("utils/search.query"),Newsletter=require("core.components:newsletter"),ScriptLoader=require("utils/script.loader"),Template=require("core.templates:controls/api"),isLocalOK=Helper.isAvailable();return new function(){var CONFIG={auto_poll:!0,noBanner_poll_interval_in_min:1,activeBanner_poll_interval_in_min:.5},ENABLED=!isWebview,CUSTOM_FEED=Query.getVal("_breaking_feed_url")||null,BANNER_LOAD=!1,VERSION_META=document.querySelector('meta[name="hp_version"]'),Proto=this,template=!1,timer=!1,showing=!1,location=-1<window.location.hostname.indexOf("foxbusiness")?"foxbusiness":"foxnews",version=VERSION_META?VERSION_META.getAttribute("content"):null,url=function(domain){if(CUSTOM_FEED)return CUSTOM_FEED;domain=(!version||"v3"!==version)&&"foxbusiness"===domain?"https://web.archive.org/web/20241123032648/https://api.foxbusiness.com/spark/layouts?type=layout&size=1&subtype=breakingNews":"https://web.archive.org/web/20241123032648/https://www.foxnews.com/js/breakingNews.js";return domain}(location),interval=CONFIG.activeBanner_poll_interval_in_min,container=$(".post-content");function runInterval(){clearInterval(timer),timer=setInterval(function(){Proto.poll()},6e4*interval)}function cacheBuster(freq){freq=freq||!1;var date=new Date,str=date.getFullYear().toString()+(date.getMonth()+1).toString()+date.getDate().toString(),hr=date.getHours()+1,date=date.getMinutes();return str+=hr.toString()+(freq&&!isNaN(freq)?Math.floor(date/parseFloat(freq)).toString():"")}function isArray(val){return"[object Array]"===Object.prototype.toString.call(val)}function getUId(data){var item,url,data="foxbusiness"===location?(item=_.get(data,"data.results[0]",null),url=_.get(item,"main-content[0].model.url"),_.get(item,"publication_date",null)):(item=Array.isArray(data)&&data[0]?data[0]:null,url=_.get(item,"link",null)||"https://web.archive.org/web/20241123032648/https://www.foxnews.com",_.get(item,"alert_date",null));return url&&data?[url,data].join("|"):""}function trackBanner(data,event,action=""){var bannerData=[],eventData={};switch(bannerData.push("type="+data.type),bannerData.push("eyebrow="+data.displayname),bannerData.push("title="+data.title),"BreakingNewsEmailCapture"===data.type&&bannerData.push("description="+data.description),event){case"event92":eventData={name:"Banner Impression",event:event};break;case"event93":eventData={name:"Banner Action",event:event,action:action},bannerData.push("action="+action);break;case"event86":eventData={name:"Email Signup Error",event:event}}ISA.track("banner-event",{event:eventData,name:$('meta[name="dc.title"]').attr("content")||"",level:$('meta[name="prism.section"]').attr("content")||"",type:$('meta[name="pagetype"]').attr("content")||"",value:bannerData.join("|")})}Proto.disable=function(){ENABLED=!1,$(".alert-container").remove()},Proto.enable=function(){ENABLED=!0},Proto.renderAlert=function(data){var compiled,target,info;ENABLED&&(compiled=_.template(template),0<container.length&&(container.html(compiled(data)),target=container,info=data,window.leapmetrics=window.leapmetrics||[],window.leapmetrics.push(function(Leap){if("function"==typeof Leap.pageEvent)return Leap.pageEvent("breakingNewsAlert",{info:info,target:target});var onBanner,onClose,sId="_breaking_news_alert",currVal=info.title,stored=SessionStorage.get(sId);function impression(){SessionStorage.set(sId,currVal),Leap.track("banner:impression",getDataInfo())}function track(type){var dataInfo=getDataInfo();dataInfo.page_action_type=type||"clicked",Leap.track("banner:action",dataInfo)}function getDataInfo(){return{page_message_title:info.displayname||info.eyebrow,page_message_text:info.title,page_message_type:info.type||"n/a",page_message_id:info.id||info.tracking||info.type}}stored&&currVal===stored||impression(),onClose=onBanner=!1,target.find("a").hover(function(){$(this).hasClass("close")?onClose=!0:onBanner=!0},function(){onClose=onBanner=!1}),$(document).on("click",function(){onClose?track("close"):onBanner&&track()})}),$(container).find(".close").click(function(evt){evt.preventDefault();evt=$(".homepage .sticky-video");$(this).closest(".alert-banner").removeClass("slide-in").addClass("slide-out"),0<evt.length&&evt.css("bottom","24px"),showing=!1,isLocalOK&&(localStorage.setItem("FNBNABURL",data.uid),trackBanner(data,"event93","close"))}),$(container).find(".alert-title > a").click(function(evt){isLocalOK&&localStorage.setItem("FNBNABURL",data.uid),$(this).closest(".alert-banner").removeClass("slide-in").addClass("slide-out"),showing=!1}),$(".alert-banner.slide-in").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("slide-in"),showing=!0}),$(".alert-info a").on("click",function(evt){trackBanner(data,"event93","click")}),function(form,data){if(0===form.length)return;var content=$(".breakingnews-form"),input=form.find("input[type='email']"),submit_btn=form.find("input[type='submit']"),error_msg=content.find(".message.error"),success_msg=content.find(".message.success"),content=form.siblings(".message").find(".close-btn a"),redirect_url=submit_btn.attr("data-email-ct"),title=$(".breakingnews-info").find(".alert-title");Newsletter.set({elm:form,SLID:"3DC725E303A24F8D10A1AF4E9E458A65",INPUT:input,INPUT_STR:" ",campaign:"breaking-news",widget_title:title.text().trim(),url:redirect_url||null,onError:function(){form.addClass("hide"),error_msg.removeClass("hide"),trackBanner(data,"event86")},onSuccess:function(){form.addClass("hide"),success_msg.removeClass("hide"),error_msg.addClass("hide"),localStorage.setItem("FNBNABURL",data.uid),setTimeout(function(){$(".alert-banner").removeClass("slide-in").addClass("slide-out")},5e3),0<redirect_url.length&&setTimeout(function(){window.open(redirect_url,"_blank")},1e3)}}),content.on("click",function(evt){evt.preventDefault(),input.val(" "),success_msg.addClass("hide"),error_msg.addClass("hide"),form.removeClass("hide")}),submit_btn.on("click",function(evt){trackBanner(data,"event93","submit email")})}($("form.form-breakingnews-email"),data)))},Proto.poll=function(){ENABLED&&("foxbusiness"===location?$.ajax({url:url,data:{cb:cacheBuster(2)},cache:!0,async:!0}).done(function(data){!function(data){if(data.data&&data.data.results&&isArray(data.data.results)&&0<data.data.results.length){var previousUId=!1,item=data.data.results[0],itemEXT=item["main-content"][0],currURL=item&&itemEXT&&item["main-content"][0].model?item["main-content"][0].model.url:"",data=getUId(data);if(isLocalOK&&(previousUId=localStorage.getItem("FNBNABURL")),(!!CUSTOM_FEED||(!previousUId||previousUId!==data))&&0<currURL.length){if("BreakingNews"===itemEXT.model.bannerType)item.classname="is-breaking",item.displayname="Breaking News",item.tracking="hp1bbkn";else switch(item.classname="is-programming",itemEXT.model.bannerType){case"ProgrammingAlert":item.displayname="Programming Alert",item.tracking="hp1bprog";break;case"LiveCoverage":item.displayname="Live Coverage",item.tracking="hp1blc";break;case"DevelopingStory":item.displayname="Developing Story",item.tracking="hp1bds";break;case"WatchLive":item.displayname="Watch Live",item.tracking="hp1bwn";break;default:item.displayname="",item.tracking="hp1bblank",item.classname="is-programming"}previousUId={uid:data,title:itemEXT.model.headline,link:currURL,type:itemEXT.component,helpertext:"hide",slide:showing?"":"slide-in"};(item=_.merge(item,previousUId)).eyebrow&&(item.displayname=item.eyebrow),Proto.renderAlert(item)}}}(data)}):ScriptLoader(url+[/\?/.test(url)?"&":"?","cb="+cacheBuster(2)].join(""),function(){},{noCacheString:!0}))},Proto.init=function(){ENABLED&&!function(Template,configuration){Template.get("/static/orion/scripts/core/base/app/templates/breaking.news.html",function(response){response&&(template=response,configuration&&(CONFIG=_.merge(CONFIG,configuration)),window.fox_header_breakingnews=function(data){if(data&&isArray(data)&&0<data.length&&data[0].type){var previousUId=!1,item=data[0],data=getUId(data);if(isLocalOK&&(previousUId=localStorage.getItem("FNBNABURL")),!!CUSTOM_FEED||(!previousUId||previousUId!==data)){if(item.uid=data,item.helpertext="",item.slide=showing?"":"slide-in","BreakingNews"===item.type)item.classname="is-breaking",item.displayname="Breaking News",item.tracking="hp1bbkn";else switch(item.classname="is-programming",item.type){case"ProgrammingAlert":item.displayname="Programming Alert",item.tracking="hp1bprog";break;case"LiveCoverage":item.displayname="Live Coverage",item.tracking="hp1blc";break;case"DevelopingStory":item.displayname="Developing Story",item.tracking="hp1bds";break;case"WatchLive":item.displayname="Watch Live",item.tracking="hp1bwn";break;case"ListenNow":item.displayname="Listen Now",item.tracking="hp1bls";break;case"FoxNationAlert":item.displayname="Fox Nation Alert",item.tracking="hp1bnat",item.classname="is-nation";break;case"FoxWeatherAlert":item.displayname="Fox Weather Alerts",item.eyebrow="Fox Weather Alerts",item.classname="is-weather",item.tracking="",item.link&&item.link.indexOf(location)<=-1&&(item.isExternalLink=!0);break;case"BreakingNewsEmailCapture":item.displayname="None"!==item.eyebrow?item.eyebrow:"",item.tracking="hp1bbkne",item.classname="is-breaking-email",item.email_button_text=item.email_button_text||"Submit",item.eyebrow="",item.link&&item.link.indexOf(location)<=-1&&(item.isExternalLink=!0);break;default:item.displayname="",item.tracking="hp1bblank",item.classname="is-programming"}BANNER_LOAD||(BANNER_LOAD=!0,trackBanner(item,"event92")),$(".alert-banner").length<1&&$(".alert-banner").addClass("slide-in"),Proto.renderAlert(item),interval=CONFIG.activeBanner_poll_interval_in_min,runInterval()}}else $(".alert-banner").addClass("slide-out"),$(".alert-banner").remove(),interval=CONFIG.noBanner_poll_interval_in_min,runInterval()},0===container.find(".alert-container").length&&container.append('<div class="alert-container"></div>'),container=container.find(".alert-container"),Proto.poll(),runInterval())})}(Template)}}});

}
/*
     FILE ARCHIVED ON 03:26:48 Nov 23, 2024 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 20:23:13 Dec 01, 2024.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 0.61
  exclusion.robots: 0.021
  exclusion.robots.policy: 0.01
  esindex: 0.011
  cdx.remote: 43.88
  LoadShardBlock: 168.152 (3)
  PetaboxLoader3.datanode: 195.909 (4)
  load_resource: 201.005
  PetaboxLoader3.resolve: 139.422
*/